<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Xatbot complet on la resposta es basa en la pàgina web introduïda"><title>Chat with any website I</title><link rel=canonical href=https://bernatbc.tk/dgsi/post/dijous-27-marc/><link rel=stylesheet href=/dgsi/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="Chat with any website I"><meta property='og:description' content="Xatbot complet on la resposta es basa en la pàgina web introduïda"><meta property='og:url' content='https://bernatbc.tk/dgsi/post/dijous-27-marc/'><meta property='og:site_name' content='Portfoli DGSI - Bernat Borràs'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:published_time' content='2025-03-27T11:30:03+00:00'><meta property='article:modified_time' content='2025-03-27T11:30:03+00:00'><meta property='og:image' content='https://bernatbc.tk/dgsi/post/dijous-27-marc/chat.png'><meta name=twitter:title content="Chat with any website I"><meta name=twitter:description content="Xatbot complet on la resposta es basa en la pàgina web introduïda"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://bernatbc.tk/dgsi/post/dijous-27-marc/chat.png'><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><div class=site-meta><h1 class=site-name><a href=/dgsi>Portfoli DGSI - Bernat Borràs</a></h1><h2 class=site-description>Portfoli de l'assignatura Desenvolupament i Gestió de Sistemes d'Informació d'en Bernat Borràs Civil</h2></div></header><ol class=menu id=main-menu><li><a href=/dgsi/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Inici</span></a></li><li><a href=/dgsi/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Arxiu</span></a></li><li><a href=/dgsi/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Cerca</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Mode fosc</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Taula de contingut</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#hackathon>Hackathon</a><ol><li><a href=#enunciat>Enunciat</a></li><li><a href=#la-solució>La solució</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/dgsi/post/dijous-27-marc/><img src=/dgsi/post/dijous-27-marc/chat_hu_2edcc3570cee88ef.png srcset="/dgsi/post/dijous-27-marc/chat_hu_2edcc3570cee88ef.png 800w, /dgsi/post/dijous-27-marc/chat_hu_2f3b845c2581b622.png 1600w" width=800 height=256 loading=lazy alt="Featured image of post Chat with any website I"></a></div><div class=article-details><header class=article-category><a href=/dgsi/categories/laboratori/ style=background-color:#6b69d6;color:#fff>Laboratori</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/dgsi/post/dijous-27-marc/>Chat with any website I</a></h2><h3 class=article-subtitle>Xatbot complet on la resposta es basa en la pàgina web introduïda</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>dijous 27 de març, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minuts a llegir</time></div></footer></div></header><section class=article-content><h2 id=hackathon>Hackathon</h2><h3 id=enunciat>Enunciat</h3><p>En aquesta hackathon seguíem desenvolupant el nostre xatbot. En Marc va escriure 4 nivells per a assolir:</p><ol><li><strong>Xatbot bàsic:</strong> Assolit el dia <a class=link href=/dgsi/post/dijous-13-marc>Dijous 13 Març</a></li><li><strong>Xatbot amb capacitat semàntica:</strong> Assolit el dia <a class=link href=/dgsi/post/dijous-20-marc>Dijous 20 Març</a></li><li><strong>Capacitat de suportar PDFs</strong></li><li><strong>Suport Docker</strong>
A més a més d&rsquo;aquest nivell, calia afegir-li una interfície gràfica (una pàgina web, per exemple) per tal d&rsquo;utilitzar-lo.</li></ol><h3 id=la-solució>La solució</h3><p>Ja feia dies que teníem pensat fer una ampliació al xatbot, per tal que en passar-li qualsevol enllaç durant l&rsquo;execució, automàticament es fes l&rsquo;scrapping en Markdown, l&rsquo;embedding, i generi un diccionari semàntic amb els conceptes rellevants.</p><p>Per aquest motiu, vam decidir fer el projecte des de 0, utilitzant <a class=link href=https://deepmind.google/technologies/gemini/pro/ target=_blank rel=noopener>Gemini 2.5 Pro</a>, que havia sortit el dia anterior. Amb un sol prompt, va aconseguir assolir els següents punts:</p><ol><li>Xatbot bàsic</li><li>Xatbot amb capacitat semàntica</li><li>Suport PDF</li><li>Interfície Web</li><li>Docker</li></ol><p>Per fer l&rsquo;embedding, es fa servir <a class=link href=https://huggingface.co/sentence-transformers/all-MiniLM-L6-v2 target=_blank rel=noopener>all-MiniLM-L6-v2</a> en local, mentre que el LLM utilitzat per al xat, és ChatGPT-4o-mini, mitjançant l&rsquo;<a class=link href=https://platform.openai.com/docs/models target=_blank rel=noopener>API d&rsquo;OpenAI</a>.</p><p>El prompt introduït és:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>OBJECTIVE: 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> You will create a python API and website. The goal is to have a functioning website in which a user can introduce an URL of any website and then the contents of the website will be scrapped and indexed and then the user will be able to chat with an LLM that will use the knowledge scraped in the website to answer the questions. Make sure to provide all the code of the diferent files preparated so I can copy and paste and to define a clear file structure. Make sure that the frontend and the bakcend lie in different folders. Everything must be dockerized so it can be easily runned by using docker compose up. To simplify things, everything should be in the same docker container. Do NOT use celery as it complicates things too much. This should support content in English, Spanish and Catalan.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>REQUIREMENTS: 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> - Use python 3.11 
</span></span><span class=line><span class=cl> - Use fastapi as api 
</span></span><span class=line><span class=cl> - Use ChromaDB as vdb and db 
</span></span><span class=line><span class=cl> - Use Beautiful soup for web scrapping 
</span></span><span class=line><span class=cl> - Use teseract paired with PyMuPDF for pdf OCR 
</span></span><span class=line><span class=cl> - Generate the embedding locally 
</span></span><span class=line><span class=cl> - Use the gpt-4o-mini-2024-07-18 for the LLM 
</span></span><span class=line><span class=cl> - The frontend must be made using html, vanilla JS and CSS. Serve it from the python backend to avoid using CORS. Keep in mind that the frontend must be in a separated folder from the backend.
</span></span><span class=line><span class=cl> - Make sure to not write the version of the package in the requirements.txt to fetch the latest version.
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>INSTRUCTIONS: 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> - When the user enters a website url, the backend starts scrapping it. Make sure to extract EVERYTING from the whole website, process images and all content from PDFs and index everything in the VDB. While this is happening keep updating in the frontend the number of pages indexed so the user knows how the process goes. Make sure to use good chunking techniques so the model can efectivelly use the contents of the VDB to answer the questions. 
</span></span><span class=line><span class=cl> - Also, while indexing everything, for all the concepts and acronyms that are particular to that specific website, store them in the DB as semantic agumentation. Related concepts based must be related in the DB, as I want you to perfectly implement the rest of the application, use a simple yet functional Regex for achieving this. 
</span></span><span class=line><span class=cl> - When a user asks a question, it will first go through the VDB and all related chunks will be included in the context. Even if no chunks are find or the chunks are not relevant, pass the user question and augment it searching each word in the semantic augmentation. For each word that appears in the search, include the explanation of it as well as what is it related to in the context. After this, with all this context and the user question send it to the LLM. Also, the chat must maintain a history of 5 questions which will also be sent to the model as well as the context of those questions. 
</span></span><span class=line><span class=cl> - The user must be able to create new chats, delete old chats, and retrieve the contents of the chat when clicking on it. 
</span></span><span class=line><span class=cl> - The user must also be able to select which websites that have been scrapped does it want to talk in each chat. 
</span></span><span class=line><span class=cl> - Make sure that while the scrapping is ongoing the user can still talk with the LLM, delete chats and whatever it wants to do. 
</span></span><span class=line><span class=cl> - And make sure the LLM includes the references from which it has obtained the information (URLs), or no references if it has answered without using the VDB knowledge. 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>IMPORTANT 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> - Make sure to implement EVERYTHING as described, do NOT cut corners nor simplify the implementation in ANY way.
</span></span><span class=line><span class=cl> - Apply ANY and ALL the improvements that you think of and you will get handsomely rewarded. 
</span></span><span class=line><span class=cl> - If you do not follow the instructions you will be fired.
</span></span></code></pre></td></tr></table></div></div><p>Per a més informació sobre el projecte, podeu donar un cop d&rsquo;ull al <a class=link href=https://github.com/DGSI-UPC/chat-with-any-website/blob/main/README.md target=_blank rel=noopener>README</a> del projecte. Només voldria mencionar que la versió del projecte està actualitzada amb els continguts de <a class=link href=/dgsi/post/dijous-10-abril>Chat with any website II</a>. Al següent enllaç trobareu el codi font del projecte:</p><p><a class=link href=https://github.com/DGSI-UPC/chat-with-any-website target=_blank rel=noopener>Veure a GitHub</a></p></section><footer class=article-footer><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>Última vegada actualitzat dijous 27 de març, 2025</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Continguts relacionats</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/dgsi/post/dimarts-27-maig/><div class=article-image><img src=/dgsi/post/dimarts-27-maig/react.9d6d6588169734b4f82494d787799805_hu_2d2bce0c383ebc6f.webp width=250 height=150 loading=lazy alt="Featured image of post Creant Agents" data-key=dimarts-27-maig data-hash="md5-nW1liBaXNLT4JJTXh3mYBQ=="></div><div class=article-details><h2 class=article-title>Creant Agents</h2></div></a></article><article class=has-image><a href=/dgsi/post/dijous-22-maig/><div class=article-image><img src=/dgsi/post/dijous-22-maig/claude.967a6833f96e6297990363923d897882_hu_a82c8374381f348a.png width=250 height=150 loading=lazy alt="Featured image of post Model Context Protocol I" data-key=dijous-22-maig data-hash="md5-lnpoM/luYpeZA2OSPYl4gg=="></div><div class=article-details><h2 class=article-title>Model Context Protocol I</h2></div></a></article><article class=has-image><a href=/dgsi/post/dijous-15-maig/><div class=article-image><img src=/dgsi/post/dijous-15-maig/browser-use.4e52686126890f95782d0a913738b710_hu_8e82eb802b9c2d1a.png width=250 height=150 loading=lazy alt="Featured image of post Agents I: Broswer-use" data-key=dijous-15-maig data-hash="md5-TlJoYSaJD5V4LQqRNzi3EA=="></div><div class=article-details><h2 class=article-title>Agents I: Broswer-use</h2></div></a></article><article class=has-image><a href=/dgsi/post/dijous-08-maig/><div class=article-image><img src=/dgsi/post/dijous-08-maig/mrp.5cff345cf218df0df174561cb24820e4_hu_f17c38fbf74814b2.png width=250 height=150 loading=lazy alt="Featured image of post MRP d'impressores 3D II" data-key=dijous-08-maig data-hash="md5-XP80XPIY3w3xdFYcskgg5A=="></div><div class=article-details><h2 class=article-title>MRP d'impressores 3D II</h2></div></a></article><article class=has-image><a href=/dgsi/post/dijous-24-abril/><div class=article-image><img src=/dgsi/post/dijous-24-abril/mrp.5cff345cf218df0df174561cb24820e4_hu_f17c38fbf74814b2.png width=250 height=150 loading=lazy alt="Featured image of post MRP d'impressores 3D I" data-key=dijous-24-abril data-hash="md5-XP80XPIY3w3xdFYcskgg5A=="></div><div class=article-details><h2 class=article-title>MRP d'impressores 3D I</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2025 Portfoli DGSI - Bernat Borràs</section><section class=powerby>Creat amb <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Tema <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> dissenyat per <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/dgsi/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>